\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerthemeciposter}

\RequirePackage{fancyvrb}


\newlength{\outerborder}
\setlength{\outerborder}{20mm}
\newlength{\innerborder}
\setlength{\innerborder}{30mm}
\newlength{\heighttitleblock}
\setlength{\heighttitleblock}{100mm}
\newlength{\heightfooterblock}
\setlength{\heightfooterblock}{100mm}

\RequirePackage[absolute, overlay]{textpos}
\setlength{\TPHorizModule}{1mm}
\setlength{\TPVertModule}{\TPHorizModule}
% set this at {\outerblock + \innerblock}{\outerblock + \innerblock + \heighttitleblock + \innerblock}
\textblockorigin{50mm}{180mm}

\RequirePackage[gen]{eurosym}

\newcommand{\autorefp}[1]{ (\autoref{#1})}
\newcommand{\refp}[1]{ (\ref{#1})}

\RequirePackage{etoolbox}

\def\email#1{\def\@email{#1}}
\email{your@email.com}

\RequirePackage[gen]{eurosym}

\def\lang#1{\def\@lang{#1}}
\lang{english}

\newcommand{\companylogo}[1]{%
  \edef\lang{{#1}}%
  \expandafter\ifstrequal\lang{english}{
    \includegraphics[height = 50mm, keepaspectratio]{Rlogo}
  }{
    \includegraphics[height = 50mm, keepaspectratio]{useR}
  }%
}

\RequirePackage[\@lang]{babel}
\RequirePackage{graphicx}
\RequirePackage{pgf}
\RequirePackage{amsmath}
\RequirePackage[round, colon, authoryear, sort&compress]{natbib}

\RequirePackage{ifxetex}

\ifxetex
  \RequirePackage[no-math]{fontspec}
  \setmainfont[Ligatures=TeX]{Calibri}
  \setmonofont{Courier New}
\else
  \RequirePackage[T1]{fontenc}
  \RequirePackage[utf8]{inputenc}
  \RequirePackage{lmodern}
\fi
\usefonttheme{serif}

\frenchspacing


\mode<presentation>

\definecolor{R.blue}{RGB}{133, 151, 190}
\definecolor{R.gray}{RGB}{131, 135, 129}
\definecolor{background}{RGB}{242, 242, 242}

\setbeamercolor{headline}{fg = black, bg = background}
\setbeamercolor{footline}{fg = white, bg = R.blue}
\setbeamerfont{footline}{size* = {60pt}{72pt}, series = \mdseries}
\setbeamerfont{email}{size* = {40pt}{48pt}, series = \mdseries}

\setbeamercolor{title}{fg = black}
\setbeamerfont{title}{size* = {90pt}{108pt}, series = \bfseries}

\setbeamercolor{subtitle}{fg=black}
\setbeamerfont{subtitle}{size* = {90pt}{108pt}, series = \mdseries}

\setbeamercolor{author}{fg = black}
\setbeamerfont{author}{size* = {60pt}{72pt}, series = \mdseries}

\setbeamertemplate{navigation symbols}{}

\setbeamercolor{normal text}{fg = black}


\setbeamercolor{itemize item}{fg = R.blue}
\setbeamercolor{itemize subitem}{fg = R.grey}
\setbeamercolor{itemize subsubitem}{fg = R.blue}
\setbeamertemplate{itemize items}[triangle]

\setlength{\leftmargini}{15mm}

\setbeamerfont{block title}{series = \bfseries}
\setbeamercolor{block title}{fg = white, bg = R.blue}
\setbeamercolor{block body}{fg = black, bg = white}

\setbeamerfont{block title alerted}{series = \bfseries}
\setbeamercolor{block title alerted}{fg = white, bg = red}
\setbeamercolor{block body alerted}{fg = black, bg = red!50}

\setbeamerfont{block title example}{series = \bfseries}
\setbeamercolor{block title example}{fg = white, bg = green}
\setbeamercolor{block body example}{fg = black, bg = green!50}


\setbeamertemplate{block begin}{
  \begin{beamercolorbox}[leftskip = 2ex, sep = 0.2ex, colsep = 0.2ex]{block title}%
    \vspace{0.1ex plus 0.05ex minus 0.05ex}
    \usebeamerfont*{block title}\insertblocktitle
    \vspace{0.1ex plus 0.05ex minus 0.05ex}
  \end{beamercolorbox}%
  \usebeamerfont{block body}%
  \begin{beamercolorbox}[vmode, leftskip = 1ex, rightskip = 1ex plus 3ex minus 0.5ex, colsep = 0.2ex]{block body}%
    \ifbeamercolorempty[bg]{block body}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
    \vspace{0.5ex plus 0.25ex minus 0.25ex}
}
\setbeamertemplate{block end}{
  \vspace{0.5ex plus 0.25ex minus 0.25ex}
  \end{beamercolorbox}
  \vspace{2ex plus 1ex minus 1ex}
}












\setbeamertemplate{block example begin}{
  \begin{beamercolorbox}[leftskip = 2ex, sep = 0.2ex, colsep = 0.2ex]{block title example}%
    \vspace{0.1ex plus 0.05ex minus 0.05ex}
    \usebeamerfont*{block title example}\insertblocktitle
    \vspace{0.1ex plus 0.05ex minus 0.05ex}
  \end{beamercolorbox}%
  \vskip-0.5mm
  \usebeamerfont{block body example}%
  \begin{beamercolorbox}[vmode, leftskip = 1ex, rightskip = 1ex plus 2ex minus 0.25ex, colsep = 0.2ex]{block body example}%
    \ifbeamercolorempty[bg]{block body example}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
  \vspace{0.5ex plus 0.25ex minus 0.25ex}
}
\setbeamertemplate{block example end}{
  \vspace{0.5ex plus 0.25ex minus 0.25ex}
  \end{beamercolorbox}
  \vspace{2ex plus 1ex minus 1ex}
}



















\setbeamertemplate{block alerted begin}{
  \begin{beamercolorbox}[leftskip = 2ex, sep = 0.2ex, colsep = 0.2ex]{block title alerted}%
    \vspace{0.1ex plus 0.05ex minus 0.05ex}
    \usebeamerfont*{block title alerted}\insertblocktitle
    \vspace{0.1ex plus 0.05ex minus 0.05ex}
  \end{beamercolorbox}%
  \vskip-0.5mm
  \usebeamerfont{block body alerted}%
  \begin{beamercolorbox}[vmode, leftskip = 1ex, rightskip = 1ex plus 2ex minus 0.25ex, colsep = 0.2ex]{block body alerted}%
    \ifbeamercolorempty[bg]{block body alerted}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
  \vspace{0.5ex plus 0.25ex minus 0.25ex}
}
\setbeamertemplate{block alerted end}{
  \vspace{0.5ex plus 0.25ex minus 0.25ex}
  \end{beamercolorbox}
  \vspace{2ex plus 1ex minus 1ex}
}




















\setbeamertemplate{headline}{  
   \leavevmode

  \begin{textblock}{1}(596.6, -120.2)
    \companylogo{\@lang}
  \end{textblock}

  \begin{textblock}{300}(0, 943)
    {
    \begin{minipage}[b][30mm][b]{250mm}
      \begin{flushleft}
        \usebeamerfont{email}\usebeamercolor[fg]{footline}\@email\\
        \usebeamerfont{footline}\usebeamercolor[fg]{footline}www.organisation.org
      \end{flushleft}
    \end{minipage}
    }
  \end{textblock}

\begin{textblock}{450}(0, -120)
    \begin{minipage}[b][\heighttitleblock][b]{580mm}
      \noindent
      \begin{center}
      \vfill\vfill
      \usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle\\
      \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle
      \vfill
      \usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor
      \vfill\vfill
      \end{center}
    \end{minipage}
  \end{textblock}

}

\setbeamertemplate{background canvas}{  
  \begin{pgfpicture}{0cm}{0cm}{\paperwidth}{\paperheight}
    \color{R.blue}
    \pgfrect[fill]
      {\pgfpoint{\outerborder}{\outerborder}}
      {\pgfpoint{\paperwidth - \outerborder - \outerborder}{\heightfooterblock}}
    \color{background}
    \pgfrect[fill]
      {\pgfpoint{\outerborder}{\outerborder + \heightfooterblock}}
      {\pgfpoint{- \outerborder + \paperwidth - \outerborder}{-\outerborder - \heightfooterblock + \paperheight - \outerborder}}

% % rectangles to help alignment of style items
% \color{magenta}
%   \pgfrect[fill]
%     {\pgfpoint{\paperwidth - \outerborder}{\paperheight - \outerborder}}
%     {\pgfpoint{- \innerborder}{- \innerborder}}
%   \pgfrect[fill]
%     {\pgfpoint{\paperwidth - \outerborder}{\paperheight - \outerborder - \heighttitleblock}}
%     {\pgfpoint{- \outerborder}{- \innerborder}}
% \color{blue}
%   \pgfrect[fill]
%     {\pgfpoint{\outerborder}{\outerborder}}
%     {\pgfpoint{\innerborder}{\innerborder}}
%   \pgfrect[fill]
%     {\pgfpoint{\paperwidth - \outerborder}{\outerborder}}
%     {\pgfpoint{- \innerborder}{\innerborder}}
%   \pgfrect[fill]
%     {\pgfpoint{\outerborder}{\paperheight - \outerborder}}
%     {\pgfpoint{\innerborder}{- \innerborder}}
%   \pgfrect[fill]
%     {\pgfpoint{\paperwidth - \outerborder}{\paperheight - \outerborder}}
%     {\pgfpoint{- \innerborder}{- \innerborder}}
%   \pgfrect[fill]
%     {\pgfpoint{\paperwidth - \outerborder}{\paperheight - \outerborder - \innerborder - \heighttitleblock}}
%     {\pgfpoint{- \innerborder}{- \innerborder}}
%   \pgfrect[fill]
%     {\pgfpoint{\outerborder}{\paperheight - \outerborder - \innerborder - \heighttitleblock}}
%     {\pgfpoint{\innerborder}{- \innerborder}}

  \end{pgfpicture}
}

\mode<all>
